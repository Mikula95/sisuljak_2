<!DOCTYPE html>
<html>
<head>
    <title>Questions</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            font-size: 16px; /* This sets the base size, 1rem will equal to this size. */
            background-color: #f5f5f5;
            margin: 0;
            padding: 1.25rem;
        }

        div {
            background-color: #fff;
            padding: 1.25rem;
            margin-bottom: 1.25rem;
            border-radius: 0.3125rem;
            box-shadow: 0 0 0.625rem rgba(0, 0, 0, 0.1);
        }

        h2 {
            border-bottom: 0.125rem solid #e5e5e5;
            padding-bottom: 0.625rem;
            margin-bottom: 1.25rem;
            color: #333;
        }

        button {
            padding: 0.625rem 1.25rem;
            border: none;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            border-radius: 0.1875rem;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: #0056b3;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table, th, td {
            border: 0.0625rem solid #ddd;
        }

        th, td {
            padding: 0.625rem;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        tbody tr:hover {
            background-color: #f5f5fa;
        }
    </style>
</head>
<body>
        <div>
            <h2>A1. How many unique gene/copy-number values are in the file?</h2>
            <button id="btnA1">Calculate</button>
            <p>Answer: <span id="resultA1"></span></p>
        </div>
        <div>
            <h2>A2. Compute the mean and standard deviation of copy number for all unique human gene products/proteins</h2>
            <button id="btnA2">Calculate</button>
            <table id="resultA2">
                <thead>
                    <tr>
                        <th>Gene</th>
                        <th>Mean</th>
                        <th>Standard Deviation</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div>
            <h2>A3. Calculate the percentile rank (in terms of copy number ranks) for each gene product/protein.</h2>
            <button id="btnA3">Calculate</button>
            <table id="resultA3">
                <thead>
                    <tr>
                        <th>Gene</th>
                        <th>Percentile</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div>
            <h2>B1. What is the domain with the highest average abundance (i.e. across all copies of the domain in all gene
                products/proteins)?</h2>
            <button id="btnB1">Calculate</button>
            <p>Answer: <span id="resultB1"></span></p>
        </div>


        <div>
            <h2>B2. </h2>
            <button id="btnB2">Calculate</button>
            <p>Answer: <span id="resultB2"></span></p>
        </div>
        <!-- Add divs for other questions in a similar way -->
    
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                // A1 Button
                document.getElementById("btnA1").addEventListener("click", function() {
                    fetchAnswer("A1");
                });
            
                // A2 Button
                document.getElementById("btnA2").addEventListener("click", function() {
                    fetchAnswer("A2");
                });
            
                // A3 Button
                document.getElementById("btnA3").addEventListener("click", function() {
                    fetchAnswer("A3");
                });

                document.getElementById("btnB1").addEventListener("click", function() {
                    fetchAnswer("B1");
                });

                document.getElementById("btnB2").addEventListener("click", function() {
                    fetchAnswer("B2");
                });
            });
            
            function fetchAnswer(question) {
                fetch(`/calculate/${question}`, {
                    method: 'POST'
                })
                .then(response => response.json())
                .then(data => {
                    if (question === 'A1') {
                        document.getElementById(`result${question}`).innerText = data.result;
                    }  if (question === 'A2' || question === 'A3') {
                        const tableBody = document.querySelector(`#result${question} tbody`);
                        tableBody.innerHTML = ''; // Clear previous entries
                        
                        data.result.forEach(row => {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                                <td>${row.Gn}</td>
                                <td>${row.mean || row.Percentile || 'N/A'}</td>
                                <td>${row.std || ''}</td>
                            `;
                            tableBody.appendChild(tr);
                        });
                    }

                    if (question ==="B1"){
                       
                        document.getElementById(`result${question}`).innerText = data.result;
                    }

                    if (question ==="B2"){
                       
                        document.getElementById(`result${question}`).innerText = data.result;
                    }
                })
                .catch(error => {
                    console.error("Error fetching data:", error);
                });
            }
            
        </script>
<!-- ... rest of your HTML code ... -->
</body>
</html>

